@inject FileUploadService FileState
@inject NavigationManager NavManager

<MudFileUpload T="IBrowserFile" FilesChanged="UploadFiles">
    <ActivatorContent>
        <MudButton Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.FileUpload"
                   Color="Color.Error">
            <b>Upload media</b>
        </MudButton>
    </ActivatorContent>
</MudFileUpload>

@code {
    
    private async Task UploadFiles(IBrowserFile file)
    {
        var uploadedFile = await FileState.ProcessUpload(file);
    
        FileState.SetFiles(new List<UploadedFile> { uploadedFile });
        NavManager.NavigateTo("/Upload");
    }
}