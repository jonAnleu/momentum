<MudButtonGroup Class="border-solid border mud-border-primary" Variant="Variant.Filled" Size="Size.Small">
    <MudToggleIconButton Icon="@Icons.Material.Filled.CheckBoxOutlineBlank"
                         ToggledIcon="@Icons.Material.Outlined.CheckBox"
                         Size="Size.Small"
                         Toggled="FileIsSelected"
                         @onclick="ToggleSelection"/>
    <MudMenu ActivationEvent="MouseEvent.MouseOver"
             ListClass="pa-0"
             PopoverClass="mt-1"
             Dense="true"
             AnchorOrigin="Origin.BottomRight"
             TransformOrigin="Origin.TopRight">
        <ActivatorContent>
            <MudIconButton Icon="@Icons.Material.Filled.ArrowDropDown"
                           Size="Size.Small"/>
        </ActivatorContent>
        <ChildContent>
            <MudMenuItem Class="justify-center pa-1" OnClick="SelectAll" Style="width: 200px;">
                <MudText Align="Align.Center" Typo="Typo.body2">Select All</MudText>
            </MudMenuItem>
            <MudMenuItem Class="justify-center pa-1" OnClick="SelectNone" Style="width: 200px;">
                <MudText Align="Align.Center" Typo="Typo.body2">Select None</MudText>
            </MudMenuItem>
        </ChildContent>
    </MudMenu>
</MudButtonGroup>

@code {
    [Parameter] public UploadedFile? File { get; set; }
    [Parameter] public EventCallback<bool> OnSelectionChanged { get; set; }

    private bool FileIsSelected => File?.IsSelected ?? false;

    private async Task ToggleSelection()
    {
        if (File == null) return; 
        
        await OnSelectionChanged.InvokeAsync(!FileIsSelected);
    }
    private async Task SelectAll() => await OnSelectionChanged.InvokeAsync(true);
    private async Task SelectNone() => await OnSelectionChanged.InvokeAsync(false);
}