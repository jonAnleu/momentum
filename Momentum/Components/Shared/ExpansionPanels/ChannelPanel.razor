<MudExpansionPanel HeaderClass="pa-0" Gutters="false" Dense="true" HideIcon="true">
    <TitleContent>
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
            <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="1">
                <MudIcon Size="Size.Small">
                    <i class="fa-solid fa-sitemap fa-2xs"></i>
                </MudIcon>
                <MudText Typo="Typo.subtitle2">Channel</MudText>
            </MudStack>
            <VisibilityToggleButton />
        </MudStack>
    </TitleContent>
    <ChildContent>
        @if (!string.IsNullOrEmpty(SelectedChannel))
        {
            <MudChip T="string" OnClose="Closed" Size="Size.Small" CloseIcon="@Icons.Material.Filled.Close" >
                <MudText Typo="Typo.caption" Color="Color.Primary">@SelectedChannel</MudText> 
            </MudChip>
        }
        <MudSelect T="string"
                   @bind-Value="SelectedChannel"
                   Variant="Variant.Outlined"
                   Margin="Margin.Dense"
                   OpenIcon=""
                   CloseIcon="false"
                   Placeholder="Enter target persona"
                   Underline="false">
            @foreach (var channel in _channels)
            {
                <MudSelectItem Value="channel">@channel</MudSelectItem>
            }
        </MudSelect>
       
    </ChildContent>
</MudExpansionPanel>

@code {
    [Parameter] public bool ShowOptional { get; set; }
    [Parameter] public EventCallback<bool> OnVisibilityChanged { get; set; }
    
    private void ToggleVisibility()
    {
        OnVisibilityChanged.InvokeAsync(!ShowOptional);
    }

    private string? SelectedChannel { get; set; }

    void Closed(MudChip<string> chip) {
        SelectedChannel = null; 
    }

    private readonly string[] _channels =
    {
        "Experiential/Live Events", 
        "In-app", 
        "Outdoor/Out-of-home", 
        "Partner/ online properties", 
        "Press/Media", 
        "Social"
    };
}