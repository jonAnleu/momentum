@inject FileUploadStateService FileState

<MudStack>

    @if (File != null)
    {
        <UploadFileCard File="@File"
                        IsSelected="@SelectedFiles.Contains(File)"
                        OnToggleSelected="ToggleSelection"/>
    }
    else
    {
        <MudText>No file selected</MudText>
    }
</MudStack>

@code {
    [Parameter] public UploadedFile? File { get; set; }
    [Parameter] public EventCallback<List<UploadedFile>> OnSelectionChanged { get; set; }

    private List<UploadedFile> SelectedFiles = new();

    private async Task ToggleSelection(UploadedFile file)
    {
        if (SelectedFiles.Contains(file))
            SelectedFiles.Remove(file);
        else
            SelectedFiles.Add(file);

        await OnSelectionChanged.InvokeAsync(SelectedFiles);
    }
}