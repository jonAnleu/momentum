<MudTooltip Text="Add Publication Date" Color="Color.Dark">
    <MudPaper Class="d-flex flex-grow-1 align-center pl-2" Outlined="true" @onclick="ToggleOpen">
        @if (File?.PublicationDate != null || File?.PublicationTime != null)
        {
            <MudText Typo="Typo.caption"> @File.PublicationDate?.ToString("MM/dd/yyyy") @File.PublicationTime?.ToString("hh\\:mm")</MudText>
        }
        else
        {
        <MudText Typo="Typo.caption">Add Publication Date</MudText>
        }
        <MudSpacer/>
        <MudDivider Vertical="true" FlexItem="true"/>
        <MudIconButton Ripple="false" Icon="@Icons.Material.Sharp.KeyboardArrowRight" Size="Size.Small"/>
    </MudPaper>
</MudTooltip>

<MudPopover Open="@_open" Fixed="true" Class="pa-2">
    <MudStack Spacing="2">
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween" >
            <MudText Class="justify-start" Typo="Typo.caption">Add Publication Date</MudText>
            <MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Filled.Refresh" Size="Size.Small"/>
        </MudStack>
            <MudDatePicker @bind-Date="File.PublicationDate" Variant="Variant.Outlined" Color="Color.Error" Margin="Margin.Dense" Mask="@(new DateMask("MM/dd/yyyy"))" DateFormat="MM/dd/yyyy" ShowToolbar="false" Editable="true" Placeholder="Add Publication Date"/>
            <MudTimePicker @bind-Time="File.PublicationTime" Variant="Variant.Outlined" Color="Color.Error" Margin="Margin.Dense" 
                           Placeholder="Add Publication Time" AmPm="true" />
        <MudStack Class="mt-3" Row="true" Justify="Justify.FlexEnd">
            <MudButton Variant="Variant.Filled" Color="Color.Error" Size="Size.Small" OnClick="ToggleOpen">OK</MudButton>
        </MudStack>
    </MudStack>
</MudPopover>

@code{
    [Parameter] public UploadedFile? File { get; set; }
    private bool _open;

    private void ToggleOpen() => _open = !_open;
}